{"version":3,"sources":["styles.ts","components/SensorCard.tsx","QueueReader.ts","MessageTypes.ts","components/ConnectionCard.tsx","components/StatusDisplay.tsx","messaging.config.ts","components/App.tsx","index.tsx","defaultTheme.ts","logo.svg"],"names":["APP","styled","div","_templateObject","Object","taggedTemplateLiteral","LOGO","img","_templateObject2","APPLICATION_NAME","h1","_templateObject3","p","theme","primary","STATUS_DISPLAY","_templateObject4","CARD","_templateObject5","secondary","SENSOR_VALUE","_templateObject6","CONNECTION_CARD","_templateObject7","CONNECTION_ICON","_templateObject8","connected","CARD_TYPE","_templateObject9","SensorCard","_ref","sensorData","typeID","data","react_default","a","createElement","src","concat","alt","width","height","value","unit","TypeID","ConnectionCard","Fragment","defaultData","nothingReceivedYet","instanceID","location","timestamp","StatusDisplay","_useState","useState","_useState2","slicedToArray","light","setLight","_useState3","_useState4","temperature","setTemperature","_useState5","_useState6","humidity","setHumidity","_useState7","_useState8","lamp","setLamp","_useState9","_useState10","heater","setHeater","_useState11","_useState12","humidifier","setHumidifier","_useState13","heartBeatReceived","_useState14","setConnected","messageHandler","asyncToGenerator","StatusDisplay_regeneratorRuntime","mark","_callee","message","wrap","_context","prev","next","t0","body","abrupt","stop","_x","apply","this","arguments","useEffect","sbClient","ServiceBusClient","sensorReciever","createReceiver","actuatorReciever","myErrorHandler","_ref2","_regeneratorRuntime","_callee2","error","_context2","console","log","_x2","subscribe","processMessage","processError","subToSensors","interval","setInterval","clearInterval","ConnectionCard_ConnectionCard","SensorCard_SensorCard","App","logo","StatusDisplay_StatusDisplay","GlobalStyle","createGlobalStyle","src_templateObject","ReactDOM","createRoot","document","getElementById","render","StrictMode","styled_components_browser_esm","components_App","module","exports","__webpack_require__"],"mappings":"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","file":"static/js/main.edadf302.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\nexport const APP = styled.div`\n  padding: 40px;\n`;\n\nexport const LOGO = styled.img`\n  margin-right: 30px;\n  margin-left: 20px;\n`;\n\nexport const APPLICATION_NAME = styled.h1`\n  display: inline;\n  color: ${(p) => p.theme.primary};\n`;\n\nexport const STATUS_DISPLAY = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: 30px;\n  flex-flow: row wrap;\n  padding-left: 40px;\n  padding-right: 40px;\n`;\n\nexport const CARD = styled.div`\n  margin-left: 40px;\n  margin-right: 40px;\n  padding: 20px;\n  padding-bottom: 40px;\n  border: 3px solid ${(p) => p.theme.secondary};\n  border-radius: 10px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  height: 300px;\n  width: 230px;\n  font-size: 20px;\n`;\n\nexport const SENSOR_VALUE = styled.p`\n  color: ${(p) => p.theme.primary};\n  font-size: 40px;\n`;\n\nexport const CONNECTION_CARD = styled.div`\n  /* display: inline-block; */\n  border: 3px solid ${(p) => p.theme.secondary};\n  border-radius: 3px;\n  float: right;\n  /* margin: 10px; */\n  padding: 10px;\n`;\n\ntype Props = { connected: boolean };\nexport const CONNECTION_ICON = styled.div`\n  border-radius: 50%;\n  background-color: red;\n  background-color: ${(p: Props) => (p.connected ? \"green\" : \"red\")};\n  height: 15px;\n  width: 15px;\n  display: inline-block;\n  margin-right: 10px\n`;\n\nexport const CARD_TYPE = styled.h1`\n  color: ${(p) => p.theme.secondary};\n  width: 100%;\n  margin-bottom: 20px;\n`","import { MessagingError } from \"@azure/service-bus\";\nimport React from \"react\";\nimport { MessageBody } from \"../MessageTypes\";\nimport { CARD, SENSOR_VALUE } from \"../styles\";\n\ntype Props = {\n  sensorData: MessageBody;\n};\n\nexport const SensorCard: React.FC<Props> = ({ sensorData }) => {\n  const { typeID, data } = sensorData;\n  return (\n    <CARD>\n      <p>{typeID}</p>\n      <img src={`${typeID}.svg`} alt={typeID} width=\"75\" height=\"75\" />\n      <SENSOR_VALUE>\n        {data.value} {data.unit}\n      </SENSOR_VALUE>\n    </CARD>\n  );\n};\n","import { delay, ServiceBusClient, ServiceBusMessage } from \"@azure/service-bus\";\nimport {\n  connectionString,\n  topicSensorData,\n  topicActuatorState,\n  subscriptionName,\n} from \"./messaging.config\";\n\nexport const subToSensors = (\n  messageHandler: (message: any) => Promise<any>\n) => {\n  const sbClient = new ServiceBusClient(connectionString);\n  const sensorReciever = sbClient.createReceiver(\n    topicSensorData,\n    subscriptionName\n  );\n  const actuatorReciever = sbClient.createReceiver(\n    topicActuatorState,\n    subscriptionName\n  );\n\n  const myMessageHandler = async (message: any) => {\n    console.log(message)\n  }\n\n  const myErrorHandler = async (error: any) => {\n    console.log(error);\n  };\n\n  sensorReciever.subscribe({\n    processMessage: messageHandler,\n    processError: myErrorHandler,\n  });\n\n  actuatorReciever.subscribe({\n    processMessage: messageHandler,\n    processError: myErrorHandler,\n  })\n};\n","export enum TypeID {\n  light = \"Light Sensor\",\n  humidity = \"Humidity Sensor\",\n  temperature = \"Temperature Sensor\",\n  lamp = \"Lamp\",\n  heater = \"Heater\",\n  humidifier = \"Humidifier\",\n  nothingReceivedYet = \"No Data\"\n}\n\nexport type MessageBody = {\n  typeID: TypeID;\n  instanceID: string;\n  location: string;\n  timestamp: string;\n  data: {\n    value: number;\n    unit?: string;\n  };\n};\n","import React from \"react\";\nimport { CONNECTION_CARD, CONNECTION_ICON } from \"../styles\";\n\ntype Props = { connected: boolean };\nexport const ConnectionCard: React.FC<Props> = ({ connected }) => {\n  return (\n    <CONNECTION_CARD>\n      <CONNECTION_ICON connected={connected} />\n      Device {connected || <>not</>} connected\n    </CONNECTION_CARD>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { SensorCard } from \"./SensorCard\";\nimport { ActuatorCard } from \"./ActuatorCard\";\nimport { CARD_TYPE, STATUS_DISPLAY } from \"../styles\";\nimport { subToSensors } from \"../QueueReader\";\nimport { ServiceBusMessage } from \"@azure/service-bus\";\nimport { TypeID, MessageBody } from \"../MessageTypes\";\nimport { ConnectionCard } from \"./ConnectionCard\";\n\nconst defaultData: MessageBody = {\n  typeID: TypeID.nothingReceivedYet,\n  instanceID: \"\",\n  location: \"\",\n  timestamp: \"\",\n  data: {\n    value: 0,\n    unit: \"\",\n  },\n};\n\nexport const StatusDisplay = () => {\n  const [light, setLight] = useState<MessageBody>(defaultData);\n  const [temperature, setTemperature] = useState<MessageBody>(defaultData);\n  const [humidity, setHumidity] = useState<MessageBody>(defaultData);\n  const [lamp, setLamp] = useState<MessageBody>(defaultData);\n  const [heater, setHeater] = useState<MessageBody>(defaultData);\n  const [humidifier, setHumidifier] = useState<MessageBody>(defaultData);\n  const [connected, setConnected] = useState({\n    connected: false,\n    heartBeatReceived: false,\n  });\n\n  const messageHandler = async (message: ServiceBusMessage) => {\n    setConnected({ connected: true, heartBeatReceived: true });\n    switch (message.body.typeID) {\n      case TypeID.light:\n        setLight(message.body);\n        break;\n      case TypeID.temperature:\n        setTemperature(message.body);\n        break;\n      case TypeID.humidity:\n        setHumidity(message.body);\n        break;\n      case TypeID.lamp:\n        setLamp(message.body);\n        break;\n      case TypeID.heater:\n        setHeater(message.body);\n        break;\n      case TypeID.humidifier:\n        setHumidifier(message.body);\n        break;\n    }\n  };\n\n  useEffect(() => subToSensors(messageHandler), []);\n\n  /**\n   * during the runtime of the application proof if you are receiving messages every 30 seconds\n   */\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (connected.heartBeatReceived === false) {\n        setConnected({ connected: false, heartBeatReceived: false });\n      } else {\n        setConnected({ connected: true, heartBeatReceived: false });\n      }\n    }, 30000);\n    return clearInterval(interval);\n  }, []);\n\n  return (\n    <>\n      <ConnectionCard connected={connected.connected} />\n      <STATUS_DISPLAY>\n        <CARD_TYPE>Sensors</CARD_TYPE>\n        <SensorCard sensorData={light} />\n        <SensorCard sensorData={temperature} />\n        <SensorCard sensorData={humidity} />\n        {/* <SensorCard name={\"isWindowOpen\"} value={state.isWindowOpen} /> */}\n      </STATUS_DISPLAY>\n      <STATUS_DISPLAY>\n        <CARD_TYPE>Actuators</CARD_TYPE>\n        <SensorCard sensorData={lamp} />\n        <SensorCard sensorData={heater} />\n        <SensorCard sensorData={humidifier} />\n        {/* <SensorCard /> */}\n      </STATUS_DISPLAY>\n    </>\n  );\n};\n","export const connectionString =\n  \"Endpoint=sb://greenhouse-iot.servicebus.windows.net/;SharedAccessKeyName=smart-greenhouse;SharedAccessKey=wq9l2WnId9+TQIiNsoH81x4Gn9k4sRsjCtC/H4AqyhA=\";\nexport const topicSensorData = \"sensor-data\";\nexport const topicActuatorState = \"actuator-state\";\nexport const subscriptionName = \"UISubscription\";\n","import React from \"react\";\nimport logo from \"../logo.svg\";\nimport { APP, LOGO, APPLICATION_NAME } from \"../styles\";\nimport { StatusDisplay } from \"./StatusDisplay\";\n\nfunction App() {\n  return (\n    <APP>\n      <LOGO src={logo} alt=\"logo\" width=\"75\" height=\"75\" />\n      <APPLICATION_NAME>SMART PLANTHOUSE</APPLICATION_NAME>\n      <StatusDisplay />\n    </APP>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport App from \"./components/App\";\nimport { ThemeProvider, createGlobalStyle } from \"styled-components\";\nimport { defaultTheme } from \"./defaultTheme\";\n\nconst GlobalStyle = createGlobalStyle`\n*{\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: \"Montserrat\", sans-serif;\n    background-color: #ECF8F2\n}\n`;\n\nconst root = ReactDOM.createRoot(\n  document.getElementById(\"root\") as HTMLElement\n);\nroot.render(\n  <React.StrictMode>\n    <ThemeProvider theme={defaultTheme}>\n      <GlobalStyle />\n      <App />\n    </ThemeProvider>\n  </React.StrictMode>\n);\n","export const defaultTheme = {\n    primary: \"#5ABA63\",\n    secondary: \"#252626\",\n}","module.exports = __webpack_public_path__ + \"static/media/logo.7a907a46.svg\";"],"sourceRoot":""}